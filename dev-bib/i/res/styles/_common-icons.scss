// ================================================================================
// + Icons
// --------------------------------------------------------------------------------


// - Vars: Size
// --------------------------------------------------------------------------------

$shape-item-width: 10px;
$shape-item-height: 17px;
$shape-spread-width: $shape-item-width * 2 - 1px;
$shape-spread-height: $shape-item-height;

$icon-size: 29px;
$icon-width: $icon-size;
$icon-height: $icon-size;


// - Vars: Color
// --------------------------------------------------------------------------------

$icon-border-color: rgb(192,192,192);

$icon-label-alpha: 0.5;
$icon-label-inner-color: white;
$icon-background-color: rgba(248,248,248,0.9);

$icon-background-color_chosen: rgb(192,192,192);

$icon-label-inner-color_hover: rgb(144,144,144);
$icon-background-color_hover: rgb(128,128,128);




// - BiB/i Logo
// --------------------------------------------------------------------------------

.bibi-logo {
	.bibi-type {
		display: inline-block;
		position: relative;
		font-weight: inherit;
		font-family: "Quando", serif;
		letter-spacing: -0.075em;
		word-break: keep-all;
		.bibi-type-B,
		.bibi-type-i,
		.bibi-type-slash {
			display: inline-block;
			position: relative;
		}
		.bibi-type-B {
		}
		.bibi-type-i {
		}
		.bibi-type-slash {
			font-family: "Lato", sans-serif; margin-right: 0.0275em;
			font-family: "Cantata One", serif; top: 0.05em; margin-left: -0.05em; margin-right: -0.081em;
			font-weight: 300;
			font-size: .69em;
		}
	}
}


// - Draw
// --------------------------------------------------------------------------------

.bibi-icon,
.bibi-icon:before,
.bibi-icon:after,
.bibi-icon * {
	box-sizing: border-box;
	display: block;
	position: relative;
	margin: 0;
	padding: 0;
	border-style: none;
	border-width: 0;
	text-align: center;
	vertical-align: middle;
	text-decoration: none;
	background: transparent;
}

.bibi-icon {
	overflow: hidden;
	position: relative;
	border: solid 1px;
	border-radius: 2px;
	width: $icon-width;
	height: $icon-height;
	cursor: pointer;
	&:before, &:after {
		content: "";
	}
	&:before, &:after, * {
		position: absolute;
	}
	span.bibi-shape-spreads {
		left: 0;
		right: 0;
		top: 0;
		bottom: 0;
		margin: auto;
		width: $shape-spread-width;
		height: $shape-spread-height;
		span.bibi-shape-spread {
			left: 0;
			top: 0;
			width: 100%;
			height: 100%;
			span.bibi-shape-item {
				top: 0;
				border: solid 1px;
				width: $shape-item-width;
				height: $shape-item-height;
				&:first-child { left: 0; }
				&:last-child  { left: ($shape-item-width - 1px); }
			}
		}
	}
	span.bibi-shape-spreads-paged {
		span.bibi-shape-spread {
			&:first-child { display: none; }
			&:last-child  { display: none; }
		}
	}
	span.bibi-shape-spreads-horizontal {
		span.bibi-shape-spread {
			&:first-child { left: ($shape-spread-width + 1px) * -1; }
			&:last-child  { left: ($shape-spread-width + 1px); }
		}
	}
	span.bibi-shape-spreads-vertical {
		span.bibi-shape-spread {
			&:first-child { top: ($shape-spread-height + 2px) * -1; }
			&:last-child  { top: ($shape-spread-height + 2px); }
		}
	}
}


// - Write
// --------------------------------------------------------------------------------

.bibi-icon-toggle-panel {
	$bar-width: 19px;
	$bar-height: 2px;
	$bar-isolation: 4px;
	$bar-block-height: $bar-height + $bar-isolation;
	$bars-width: $bar-width;
	$bars-height: $bar-height * 3 + $bar-isolation * 2 + 1px;
	$bars-top: ($icon-height - $bars-height) / 2 - 1px;
	&:before, span, &:after {
		left: 0 !important;
		right: 0 !important;
		margin: auto !important;
		//border-bottom: solid 1px !important;
		width: $bar-width !important;
		height: $bar-height !important;
		border-radius: 1px;
		transition: .125s linear !important;
	}
	&:before, &:after {
		display: block;
		position: absolute;
	}
	&:before {
		top: $bars-top !important;
	}
	span {
		top: $bars-top + $bar-block-height !important;
		color: transparent !important;
	}
	&:after {
		top: $bars-top + $bar-block-height * 2 !important;
	}
	html.panel-opened & {
		&:before {
			transform: translateY(($bar-isolation + $bar-height) *  1) rotate(135deg);
		}
		span {
			opacity: 0;
		}
		&:after {
			transform: translateY(($bar-isolation + $bar-height) * -1) rotate(225deg);
		}
	}
}

.bibi-icon-open-newwindow,
.bibi-icon-toggle-fullscreen {
	text-decoration: none !important;
	&:before {
		left: 0;
		right: 0;
		top: 0;
		bottom: 0;
		margin: auto;
		background: no-repeat center center;
		background-size: contain;
	}
}

.bibi-icon-open-newwindow {
	$image-size: ($icon-size - 1) * 0.8;
	&:before {
		//margin: 3.5px auto 0;
		width: $image-size;
		height: $image-size;
		background-image: url(#{$path-res}/images/MaterialIcons/ic_open_in_new_black_48dp.png); /* The Material Icons */
	}
	.bibi-button.hover &:before {
		background-image: url(#{$path-res}/images/MaterialIcons/ic_open_in_new_white_48dp.png); /* The Material Icons */
	}
}

.bibi-icon-toggle-fullscreen {
	$image-size: ($icon-size - 1) * 1.0;
	&:before {
		//margin: 1.5px auto 0;
		width: $image-size;
		height: $image-size;
		background-image: url(#{$path-res}/images/MaterialIcons/ic_fullscreen_black_48dp.png); /* The Material Icons */
		html.fullscreen &,
		html:fullscreen &,
		span.bibi-holder:fullscreen & {
			background-image: url(#{$path-res}/images/MaterialIcons/ic_fullscreen_exit_black_48dp.png); /* The Material Icons */
		}
	}
	.bibi-button.hover &:before {
		background-image: url(#{$path-res}/images/MaterialIcons/ic_fullscreen_white_48dp.png); /* The Material Icons */
		html.fullscreen &,
		html:fullscreen &,
		span.bibi-holder:fullscreen & {
			background-image: url(#{$path-res}/images/MaterialIcons/ic_fullscreen_exit_white_48dp.png); /* The Material Icons */
		}
	}
}


// - Colour
// --------------------------------------------------------------------------------

//.bibi-icon { &, &:before, &:after, & * { transition: 0.15s linear; } }

$icon-label-color: lighten(black, 100% * (1 - $icon-label-alpha));

.bibi-icon {
	border-color: $icon-border-color !important;
	background-color: $icon-background-color !important;
	&.bibi-icon-toggle-panel {
		background-color: rgba(255,255,255,0.88) !important;
	}
	transition: 0.15s linear;
	html.panel-opened & {
//		opacity: 1 !important;
	}
	&:before, &:after {
		color: $icon-label-color !important;
	}
	&.bibi-icon-toggle-panel:before,
	&.bibi-icon-toggle-panel span,
	&.bibi-icon-toggle-panel:after {
		background-color: $icon-label-color !important;
	}
	&.bibi-icon-open-newwindow:before,
	&.bibi-icon-toggle-fullscreen:before {
		// image: black version
		opacity: $icon-label-alpha !important;
	}
	span.bibi-shape-spreads {
		//opacity: 0.8 !important;
		span.bibi-shape-spread {
			span.bibi-shape-item {
				border-color: $icon-label-color !important;
				background-color: $icon-label-inner-color !important;
			}
		}
	}
}

html.view-paged .bibi-icon-paged,
html.view-horizontal .bibi-icon-horizontal,
html.view-vertical .bibi-icon-vertical {
	// ON
	background-color: $icon-background-color_chosen !important;
	cursor: default !important;
	//opacity: 1 !important;
	span.bibi-shape-spreads {
		//opacity: 1 !important;
		span.bibi-shape-spread {
			span.bibi-shape-item {
				border-color: $icon-label-color !important;
				background-color: $icon-label-inner-color !important;
			}
		}
	}
}

$icon-label-color_hover: white;

.bibi-button.hover .bibi-icon {
	background-color: $icon-background-color_hover !important;
	//opacity: 1 !important;
	&:before, &:after {
		color: $icon-label-color_hover !important;
	}
	&.bibi-icon-toggle-panel:before,
	&.bibi-icon-toggle-panel span,
	&.bibi-icon-toggle-panel:after {
//		border-bottom-color: darken($icon-label-color_hover, 25%) !important;
		background-color: $icon-label-color_hover !important;
	}
	&.bibi-icon-open-newwindow:before,
	&.bibi-icon-toggle-fullscreen:before {
		// image: white version
		opacity: 1 !important;
	}
	span.bibi-shape-spreads {
		//opacity: 1 !important;
		span.bibi-shape-spread {
			span.bibi-shape-item {
				border-color: $icon-label-color_hover !important;
				background-color: $icon-label-inner-color_hover !important;
			}
		}
	}
}